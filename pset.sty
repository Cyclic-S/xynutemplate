\RequirePackage{xeCJK}%导入文件夹下字体文件
\setCJKfamilyfont{gbkaiti}{KaiTiGB2312.ttf}% 楷体_GB2312
\newcommand{\gbkaiti}{\CJKfamily{gbkaiti}}
\setCJKfamilyfont{gbfangsong}{FangSongGB2312.ttf}% 仿宋_GB2312
\newcommand{\gbfangsong}{\CJKfamily{gbfangsong}}
% 英文字体
\setmainfont{Times New Roman} % 常规英文字体
% 中文字体配置部分
\setCJKmainfont{SimSun}[AutoFakeSlant]%正文字体

%行间距设置
\RequirePackage{setspace}
\renewcommand{\baselinestretch}{1.5} % 1.5倍行间距

% 一些可能要用到的宏包
\RequirePackage{cite}
\RequirePackage{fontawesome}
\RequirePackage{pdfpages}
\RequirePackage{titlesec}
\RequirePackage{xparse,amsmath,amsfonts,mathrsfs,amsthm,amssymb,tikz,bm,graphicx,url,listings,subfig,float,subcaption}
\RequirePackage{physics}
%\RequirePackage[T1]{fontenc}
%\RequirePackage{mathptmx}% 新罗马字体
%\RequirePackage{times}
\RequirePackage[ruled,linesnumbered]{algorithm2e}
\RequirePackage{gbt7714}% 参考文献格式
\RequirePackage[left=3cm,right=2.5cm,top=2.5cm,bottom=2.5cm]{geometry}% ,showframe 显示框图
\RequirePackage{lipsum}% 生成示例

% 设置目录格式
\RequirePackage{titlesec,titletoc}
\renewcommand{\contentsname}{\centering{\quad \\
		\heiti\zihao{3}{目\qquad 录\par\par}}} % 黑体三号字加黑居中
\RequirePackage[titles,subfigure]{tocloft}
\renewcommand\cftsecdotsep{\cftdotsep}
\renewcommand\cftsecleader{\cftdotfill{\cftsecdotsep}}
\renewcommand\cftsecfont{\songti\zihao{-4}} % section字号字体
\renewcommand\cftsubsecfont{\songti\zihao{-4}} % subsection字号字体
\renewcommand\cftsubsubsecfont{\songti\zihao{-4}} % subsubsection字号字体
\renewcommand\cftsecpagefont{\mdseries}
\renewcommand\cftsubsecpagefont{\mdseries}
\renewcommand{\bibfont}{\zihao{5}}

%\titlecontents{section}[1.5em]{\zihao{-4}\bfseries}{\contentslabel[\thecontentslabel]{1.5em}}{}{\mdseries\titlerule*[2ex]{.}\contentspage}

%定义环境
\renewcommand{\qed}{\hfill\blacksquare}
\newcommand{\qedwhite}{\hfill \ensuremath{\Box}}
\numberwithin{equation}{subsection}
\newtheorem{theorem}{\hspace{2em}\textbf{定理}}[section]
\newtheorem{lemma}[theorem]{\hspace{2em}\textbf{引理}}
\newtheorem{definition}[theorem]{\hspace{2em}\textbf{定义}}
\newcommand{\qu}{\textbf{例题}\hspace{0.5em}}
\newcommand{\pf}{\textbf{证明}\hspace{0.5em}}
\newcommand{\slo}{\textbf{解}\hspace{0.5em}}
\newcommand{\zy}{\textbf{注意}\hspace{0.5em}}
\newcommand{\sm}{\textbf{说明}\hspace{0.5em}}
\newcommand{\an}{\textbf{分析}\hspace{0.5em}}
\newcommand{\xz}{\textbf{性质}\hspace{0.5em}}
\makeatletter
\g@addto@macro\th@plain{\thm@headpunct{}} %去除定义环境后点
\makeatother


%页面样式设置
\pagestyle{plain} % 仅页脚显示页数
%\everymath{\displaystyle}

% 代码格式
\RequirePackage{xcolor}
\definecolor{dkgreen}{RGB}{3,128,19}
\definecolor{dkpurple}{RGB}{170,62,245}
\lstset{
	frame=trbl,
	aboveskip=3mm,
	belowskip=3mm,
	showstringspaces=true,
	breaklines=true,
	columns=flexible,
	framerule=1pt,
	rulecolor=\color{gray},
	backgroundcolor=\color{white},
	basicstyle={\small\ttfamily},
	numbers=left,
	numbersep=1em,
	numberstyle=\color{black},
	keywordstyle=\color{blue},
	commentstyle=\color{dkgreen},
	stringstyle=\color{dkpurple},
	tabsize=3,
}

% 节标题字体设置
\ctexset{section={format={\bfseries\zihao{4}}},
	subsection={format={\bfseries\zihao{-4}}},
	subsubsection={format={\gbfangsong \zihao{-4}}}}

% 表格及图片标题样式设置-
\renewcommand{\thefigure}{\arabic{section}-\arabic{figure}} %使图编号为1-1的格式 %\protect{~}
\renewcommand{\thetable}{\arabic{section}-\arabic{table}}%使表编号为1-1的格式

%表格与图片标题字体设置宋体小五
\captionsetup[figure]{textfont=footnotesize,labelfont=footnotesize,labelformat=simple, labelsep=space}
\captionsetup[subfigure]{labelfont=footnotesize,textfont=footnotesize}
\captionsetup[table]{labelfont=footnotesize,textfont=footnotesize,labelformat=simple, labelsep=space}

%论文封面设置
%参数传递
\newtoks\serialnumber%学号
\newtoks\college%学院
\newtoks\major%专业
\newtoks\grade %年级
\newtoks\author   %作者姓名
\newtoks\titlefirst      %题目第一行
\newtoks\titlesecond  %题目第二行
\newtoks\advisor%指导老师
\newtoks\advisors	 %职称
\newtoks\submityear%提交年份
\newtoks\submitmonth%提交月份
\newtoks\submitdate   %提交日
\newtoks\zhtitle		%中文标题
\newtoks\entitle		%英文标题
\newtoks\entitletra     %英文多余一行
\newtoks\titlextra%标题多余一行时添加


%自定义命令 固定长度下划线
\newcommand\dlmu[2][4cm]{\underline{\makebox[#1][c]{#2}}}

\renewcommand\maketitle{%封面
	\cleardoublepage
	\thispagestyle{empty}
	{
		\rightline{
			\begin{tabular}{l|c|} %设置表格字体位置(左中)
				\cline{2-2}
				\songti\zihao{-4}学号：&{\quad \the\serialnumber \quad\  }\\
				\cline{2-2}
			\end{tabular}
		}
		\vspace{1.5cm}
		\begin{center}
			\includegraphics[width=11.32cm]{fig/logo.png}\\
			\vspace{1.5cm}
			{\gbkaiti\zihao{-0}\bfseries{本科毕业论文}}
			\vspace{3cm}
			%横线信息
			\begin{center}
				\zihao{4}
				\renewcommand{\arraystretch}{1.2}
				\begin{tabular}{rl}
					&\makebox[4em][s]{学院}\dlmu[10cm]{\kaishu\the\college} \\
					&\makebox[4em][s]{专业}\dlmu[10cm]{\kaishu\the\major}      \\
					&\makebox[4em][s]{年级}\dlmu[10cm]{\kaishu\the\grade}   \\
					&\makebox[4em][s]{姓名}\dlmu[10cm]{\kaishu\the\author}   \\
					&\makebox[4em][s]{论文（设计）题目}	\hspace{1.2cm}	\dlmu[8.5cm]{\kaishu\the\titlefirst}   \\ 
					&\hspace{3.5cm}\dlmu[8.5cm] {\kaishu\the\titlesecond}		\\
					&\makebox[4em][s]{指导教师}\dlmu[4.45cm]{\kaishu\the\advisor} {职称}\dlmu[4.45cm]{\kaishu\the\advisors}   \\
				\end{tabular}
			\end{center}
			\vspace{60pt}
		%日期
		\centering{  \zihao{-2}20{\the\submityear} 年{ \the\submitmonth} 月 {\the \submitdate} 日 } %自定义日期
		%\centering{  \zihao{-2}\today} %自动更新日期
	\end{center}
}
\clearpage
}
